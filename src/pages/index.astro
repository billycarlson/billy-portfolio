---
import TopNav from "../components/TopNav.astro";

const modules = import.meta.glob('../content/stories/*.mdx');
const stories = await Promise.all(
  Object.entries(modules).map(async ([path, module]) => {
    const story = await module();
    return {
      slug: path.split('/').pop()?.replace('.mdx', '') || '',
      title: story.frontmatter?.title || 'Untitled',
      lede: story.frontmatter?.lede || '',
      meta: story.frontmatter?.meta || []
    };
  })
);
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Case Studies - Billy Carlson</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
		<link rel="stylesheet" href="/styles/case-study.css" />
	</head>
	<body>
		<TopNav />
		
		<main class="stories-page">
			<div class="stories-intro">
				<p class="stories-intro-text">
					I am a product design leader who is driven to create designs that fulfill both user and business objectives.
				</p>
			</div>
			<h1 class="page-title">Case Studies</h1>
			<div class="stories-grid">
				{stories.map((story) => (
					<article class="story-card">
						<h2 class="story-title">
							<a href={`/stories/${story.slug}`}>{story.title}</a>
						</h2>
						{story.lede && (
							<p class="story-lede">{story.lede}</p>
						)}
						{story.meta.length > 0 && (
							<div class="story-meta">
								{story.meta.map((m) => <span>{m}</span>)}
							</div>
						)}
					</article>
				))}
			</div>
		</main>
	</body>
</html>

<style>
  .stories-page {
    max-width: 1320px;
    margin: 0 auto;
    padding: 80px var(--page-pad-right) 80px var(--page-pad-left);
    width: 100%;
  }

  .page-title {
    font-size: var(--step-4); /* 40px */
    line-height: 1.15;
    color: var(--text);
    font-weight: 400;
    font-family: 'Inter', sans-serif;
    margin: 0 0 60px;
  }

  .stories-intro {
    margin-bottom: 60px;
    max-width: 600px;
  }

  .stories-intro-text {
    font-size: var(--step-4); /* 40px */
    line-height: 1.15;
    color: var(--text);
    font-weight: 400;
    font-family: 'Inter', sans-serif;
    margin: 0;
  }

  .stories-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 60px;
  }

  .story-card {
    padding-bottom: 40px;
    border-bottom: 1px solid var(--hairline-subtle);
  }

  .story-card:last-child {
    border-bottom: none;
  }

  .story-title {
    font-size: var(--step-2); /* 22px */
    line-height: 1.15;
    margin: 0 0 12px;
    font-weight: 500;
    font-family: 'Inter', sans-serif;
  }

  .story-title a {
    text-decoration: none;
    color: var(--text);
    transition: color 0.2s;
  }

  .story-title a:hover {
    color: var(--muted-light);
  }

  .story-lede {
    font-size: var(--step-0); /* 16px */
    color: var(--muted);
    margin: 0 0 12px;
    line-height: 1.6;
  }

  .story-meta {
    display: flex;
    gap: 14px;
    flex-wrap: wrap;
    color: var(--muted);
    font-size: var(--step--1);
  }

</style>


---
import StoryLayout from "../../layouts/StoryLayout.astro";

export async function getStaticPaths() {
  const modules = import.meta.glob('../../content/stories/*.mdx', { eager: true });
  
  return Object.entries(modules)
    .filter(([path]) => !path.includes('template'))
    .map(([path, module]) => {
      const slug = path.split('/').pop()?.replace(/\.mdx$/, '') || '';
      const story = module as any;
      return {
        params: { slug },
        props: { 
          Content: story.default,
          frontmatter: story.frontmatter || {}
        },
      };
    });
}

const { Content, frontmatter } = Astro.props;
const { layout: _, sections: __, ...layoutProps } = frontmatter;
---

<StoryLayout {...layoutProps}>
  <Content />
</StoryLayout>


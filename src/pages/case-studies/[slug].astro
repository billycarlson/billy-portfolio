---
import CaseStudyLayout from "../../layouts/CaseStudyLayout.astro";

export async function getStaticPaths() {
  const modules = import.meta.glob('../../content/case-studies/*.mdx', { eager: true });
  
  return Object.entries(modules)
    .filter(([path]) => !path.includes('case-study-template'))
    .map(([path, module]) => {
      const slug = path.split('/').pop()?.replace('.mdx', '') || '';
      const caseStudy = module as any;
      return {
        params: { slug },
        props: { 
          Content: caseStudy.default,
          frontmatter: caseStudy.frontmatter || {}
        },
      };
    });
}

const { Content, frontmatter } = Astro.props;
const { layout: _, ...layoutProps } = frontmatter;
---

<CaseStudyLayout {...layoutProps}>
  <Content />
</CaseStudyLayout>


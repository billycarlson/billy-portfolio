---
import StoryLayout from "../../layouts/StoryLayout.astro";

export async function getStaticPaths() {
  const modules = import.meta.glob('../../content/stories/*.mdx');
  return Object.keys(modules).map((path) => ({
    params: { slug: path.split('/').pop()?.replace(/\.mdx$/, '') || '' },
    props: { path },
  }));
}

const { path } = Astro.props;
const story = await import(path);
const Content = story.default;
const frontmatter = story.frontmatter;

// Extract sections and other props, excluding layout
const { layout: _, sections: __, ...layoutProps } = frontmatter;
---

<StoryLayout {...layoutProps}>
  <Content />
</StoryLayout>


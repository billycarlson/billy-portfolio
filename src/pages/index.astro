---
import TopNav from "../components/TopNav.astro";
import Footer from "../components/Footer.astro";

// Load stories
const storyModules = import.meta.glob('../content/stories/*.mdx');
const allStories = await Promise.all(
  Object.entries(storyModules).map(async ([path, module]) => {
    try {
      const story = await module();
      const filename = path.split('/').pop() || '';
      const slug = filename.replace(/\.mdx$/, '');
      return {
        slug,
        title: story.frontmatter?.title || 'Untitled',
        lede: story.frontmatter?.lede || '',
        meta: story.frontmatter?.meta || []
      };
    } catch (error) {
      console.error(`Error loading story from ${path}:`, error);
      return null;
    }
  })
);

// Load case studies
const caseStudyModules = import.meta.glob('../content/case-studies/*.mdx');
const allCaseStudies = await Promise.all(
  Object.entries(caseStudyModules).map(async ([path, module]) => {
    try {
      const caseStudy = await module();
      const filename = path.split('/').pop() || '';
      const slug = filename.replace(/\.mdx$/, '');
      return {
        slug,
        title: caseStudy.frontmatter?.title || 'Untitled',
        lede: caseStudy.frontmatter?.lede || '',
        meta: caseStudy.frontmatter?.meta || []
      };
    } catch (error) {
      console.error(`Error loading case study from ${path}:`, error);
      return null;
    }
  })
);

// Filter out nulls and templates
const stories = allStories.filter(story => story !== null && story.slug !== 'case-study-template');
const caseStudies = allCaseStudies.filter(cs => cs !== null && cs.slug !== 'case-study-template');
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Billy Carlson - Product Design Director</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
		<link rel="stylesheet" href="/styles/case-study.css" />
	</head>
	<body>
		<TopNav />
		
		<main class="stories-page">
			<!-- WHO I AM section -->
			<section class="two-col-section">
				<div class="col-left">
					<h2 class="section-label">Who I Am</h2>
					<p class="section-intro">
						I lead design teams that ship products people love—and businesses rely on.
					</p>
				</div>
				<div class="col-right">
					<div class="attribute-item">
						<h3 class="attribute-title">Building Teams</h3>
						<p class="attribute-text">
							I build high-performing design organizations that balance creative excellence with business results. Hiring well, developing talent, and creating the conditions for designers to do their best work.
						</p>
					</div>
					<div class="attribute-item">
						<h3 class="attribute-title">Growing Designers</h3>
						<p class="attribute-text">
							Mentorship that compounds. I invest in developing designers through intentional coaching, challenging projects, and creating space for them to stretch beyond their comfort zones.
						</p>
					</div>
					<div class="attribute-item">
						<h3 class="attribute-title">Staying in the Work</h3>
						<p class="attribute-text">
							Player-coach, not just manager. I stay close to the craft—especially in high-stakes moments—modeling standards and maintaining credibility with the team.
						</p>
					</div>
				</div>
			</section>

			<!-- CASE STUDIES section -->
			{caseStudies.length > 0 && (
				<section class="two-col-section">
					<div class="col-left">
						<h2 class="section-label">Case Studies</h2>
					</div>
					<div class="col-right">
						{caseStudies.map((caseStudy) => (
							<article class="work-card stacked">
								<div class="work-card-image">
									<div class="placeholder-image"></div>
								</div>
								<div class="work-card-content">
									<h3 class="work-card-title">
										<a href={`/case-studies/${caseStudy.slug}`}>{caseStudy.title}</a>
									</h3>
									{caseStudy.lede && (
										<p class="work-card-lede">{caseStudy.lede}</p>
									)}
									{caseStudy.meta.length > 0 && (
										<div class="work-card-meta">
											{caseStudy.meta.map((m) => <span>{m}</span>)}
										</div>
									)}
								</div>
							</article>
						))}
					</div>
				</section>
			)}

			<!-- STORIES section -->
			{stories.length > 0 && (
				<section class="two-col-section">
					<div class="col-left">
						<h2 class="section-label">Stories</h2>
					</div>
					<div class="col-right">
						{stories.map((story) => (
							<article class="work-card">
								<div class="work-card-image">
									<div class="placeholder-image"></div>
								</div>
								<div class="work-card-content">
									<h3 class="work-card-title">
										<a href={`/stories/${story.slug}`}>{story.title}</a>
									</h3>
									{story.lede && (
										<p class="work-card-lede">{story.lede}</p>
									)}
									{story.meta.length > 0 && (
										<div class="work-card-meta">
											{story.meta.map((m) => <span>{m}</span>)}
										</div>
									)}
								</div>
							</article>
						))}
					</div>
				</section>
			)}

			<!-- Bottom section -->
			<section class="bottom-section">
				<p class="bottom-text">
					Design leadership isn't about having all the answers—it's about creating the conditions where great work can happen. Over the past fifteen years, I've learned that the best products come from teams that feel empowered to take risks, challenge assumptions, and push beyond the obvious solution. My role is to build those teams, protect their focus, and help them navigate the inevitable tensions between business goals and user needs.
				</p>
				<p class="bottom-text">
					I believe in staying close to the craft. While my days are filled with strategy, hiring, and stakeholder management, I never want to lose touch with the work itself. Whether it's jumping into Figma during a critical deadline or pairing with a designer on a tricky interaction, I find that hands-on involvement keeps me grounded and maintains credibility with my team.
				</p>
				<p class="bottom-text">
					The projects in this portfolio represent moments where design made a real difference—not just to metrics, but to the people using these products every day. Behind each case study is a team I'm proud to have worked with and lessons I carry forward. If you're building something ambitious and looking for a design leader who combines strategic thinking with genuine craft obsession, I'd love to talk.
				</p>
			</section>
		</main>

		<Footer />
	</body>
</html>

<style>
  .stories-page {
    max-width: 1320px;
    margin: 0 auto;
    padding: 80px 80px;
    width: 100%;
  }

  /* Two-column section layout */
  .two-col-section {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 24px;
    padding-top: 60px;
    padding-bottom: 60px;
    border-top: 1px solid var(--hairline);
  }

  .two-col-section:first-child {
    border-top: none;
    padding-top: 0;
  }

  /* Left column - section labels */
  .col-left {
    position: sticky;
    top: 100px;
    align-self: start;
  }

  .section-label {
    font-size: var(--step-1);
    line-height: 1.15;
    color: var(--text);
    font-weight: 500;
    font-family: 'Inter', sans-serif;
    margin: 0 0 24px;
    text-transform: uppercase;
    letter-spacing: 0.01em;
  }

  .section-intro {
    font-size: var(--step-4);
    line-height: 1.15;
    color: var(--text);
    font-weight: 400;
    font-family: 'Inter', sans-serif;
    margin: 0;
    width: fit-content;
  }

  /* Right column - content */
  .col-right {
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  /* Attribute items (Who I Am section) */
  .attribute-item {
    padding-top: 28px;
    padding-bottom: 28px;
    border-top: 1px solid var(--hairline);
  }

  .attribute-item:first-child {
    border-top: none;
    padding-top: 0;
  }

  .attribute-title {
    font-size: var(--step-2);
    font-weight: 500;
    font-family: 'Inter', sans-serif;
    color: var(--text);
    margin: 0 0 16px;
  }

  .attribute-text {
    font-size: var(--step-0);
    line-height: 1.6;
    color: var(--text);
    margin: 0;
    width: 100%;
  }

  /* Work cards (Case Studies & Stories) */
  .work-card {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    padding-top: 28px;
    padding-bottom: 28px;
    border-top: 1px solid var(--hairline);
    align-items: start;
  }

  .work-card.stacked {
    grid-template-columns: 1fr;
    gap: 20px;
  }

  .work-card:first-child {
    border-top: none;
    padding-top: 0;
  }

  .work-card-image {
    aspect-ratio: 16 / 9;
    overflow: hidden;
    border-radius: 4px;
  }

  .work-card-image .placeholder-image {
    width: 100%;
    height: 100%;
  }

  .work-card-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .work-card-title {
    font-size: var(--step-2);
    line-height: 1.15;
    margin: 0;
    font-weight: 500;
    font-family: 'Inter', sans-serif;
  }

  .work-card-title a {
    text-decoration: none;
    color: var(--text);
    transition: color 0.2s;
  }

  .work-card-title a:hover {
    color: var(--muted-light);
  }

  .work-card-lede {
    font-size: var(--step-0);
    color: var(--muted);
    margin: 0;
    line-height: 1.6;
  }

  .work-card-meta {
    display: flex;
    gap: 14px;
    flex-wrap: wrap;
    color: var(--muted);
    font-size: var(--step--1);
  }

  /* Bottom section */
  .bottom-section {
    padding-top: 60px;
    padding-bottom: 60px;
    border-top: 1px solid var(--hairline);
    text-align: center;
  }

  .bottom-text {
    font-size: var(--step-4);
    line-height: 1.4;
    color: var(--text);
    max-width: 900px;
    margin: 0 auto 32px;
    text-align: center;
  }

  .bottom-text:last-child {
    margin-bottom: 0;
  }

  /* Mobile responsive */
  @media (max-width: 767px) {
    .stories-page {
      padding: 40px 20px;
    }

    .two-col-section {
      grid-template-columns: 1fr;
      gap: 30px;
      padding-top: 40px;
      padding-bottom: 40px;
    }

    .col-left {
      position: static;
    }

    .section-label {
      font-size: var(--step-2);
    }

    .section-intro {
      font-size: var(--step-2);
    }

    .work-card {
      grid-template-columns: 1fr;
      gap: 20px;
    }

    .attribute-text,
    .work-card-lede {
      max-width: 100%;
    }
  }

  /* Tablet */
  @media (min-width: 768px) and (max-width: 1023px) {
    .stories-page {
      padding: 60px 40px;
    }

    .two-col-section {
      gap: 40px;
    }

    .work-card {
      grid-template-columns: 1fr;
      gap: 20px;
    }
  }
</style>

